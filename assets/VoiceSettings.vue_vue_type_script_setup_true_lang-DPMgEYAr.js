import{d as M,aJ as j,Q as z,h as c,aK as p,G as i,F as s,L as r,V as G,b as l,c as H,H as I,w as m,_ as J,aL as h,aM as S,K as C,J as T,k as N,o as n}from"./index-YObWPvjX.js";import{_ as K}from"./Card-DgbfWoQ7.js";import{s as U,a as O,b as R}from"./speechSynthesis-BI-kllFj.js";import{_ as Q}from"./Separator-C8z8sbEx.js";const X={class:"p-4 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-md space-y-6"},q={class:"flex items-center gap-3 mb-2"},W={key:0,class:"text-center py-4"},Y={key:1,class:"text-center py-4 text-gray-600 dark:text-gray-400"},Z={key:2,class:"space-y-6"},ee={class:"flex items-center gap-2"},te={class:"flex items-center gap-2"},ae={key:0,class:"text-center text-gray-500 dark:text-gray-400"},se={key:1,class:"space-y-4"},re=["value"],oe=["value"],ne={class:"flex flex-wrap justify-end gap-3 pt-6 border-t border-gray-300 dark:border-gray-600"},de=M({__name:"VoiceSettings",setup(ie){const a=j(),u=z(),$=[{label:"Browser Default (let browser choose)",value:"default"},{label:"Custom (select specific voices)",value:"custom"}],D=c(()=>{var e;const t=(e=u.info)==null?void 0:e.languages.targetLanguage;return t?a.getAvailableVoicesForLanguage(t):[]}),E=c(()=>{var e;const t=(e=u.info)==null?void 0:e.languages.sourceLanguage;return t?a.getAvailableVoicesForLanguage(t):[]}),k=c({get(){return a.settings.custom.targetLanguageVoiceName},set(t){a.setCustomTargetLanguageVoice(t)}}),v=c({get(){return a.settings.custom.sourceLanguageVoiceName},set(t){a.setCustomSourceLanguageVoice(t)}}),y=c(()=>{var t;return(t=u.info)==null?void 0:t.languages.targetLanguage}),f=c(()=>{var t;return(t=u.info)==null?void 0:t.languages.sourceLanguage}),_=c(()=>!u.isPackLoaded||!y.value||a.settings.type==="custom"&&!a.settings.custom.targetLanguageVoiceName||!p[y.value.toLowerCase()]),w=c(()=>!u.isPackLoaded||!f.value||a.settings.type==="custom"&&!a.settings.custom.sourceLanguageVoiceName||!p[f.value.toLowerCase()]),P=async()=>{var e;if(_.value)return;const t=(e=y.value)==null?void 0:e.toLowerCase();if(t&&p[t])try{await U(p[t],"target")}catch(g){console.error("Error testing target voice:",g)}},B=async()=>{var e;if(w.value)return;const t=(e=f.value)==null?void 0:e.toLowerCase();if(t&&p[t])try{await U(p[t],"source")}catch(g){console.error("Error testing source voice:",g)}};return a.initializeVoices(),(t,e)=>{const g=G,F=Q,A=R,x=O,V=K,b=J;return n(),i("div",X,[s("div",q,[r(g,{name:"i-heroicons-cog-6-tooth",class:"w-7 h-7 text-primary-500 dark:text-primary-400"}),e[5]||(e[5]=s("h2",{class:"text-2xl font-semibold text-gray-800 dark:text-gray-100"},"Voice Settings",-1))]),r(F,{class:"mb-6"}),l(a).isLoading?(n(),i("div",W,e[6]||(e[6]=[s("div",{class:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-500 dark:border-primary-400 mx-auto"},null,-1),s("p",{class:"mt-2 text-gray-600 dark:text-gray-400"},"Loading voices...",-1)]))):l(a).availableVoices.length===0?(n(),i("div",Y,[r(g,{name:"i-heroicons-speaker-x-mark",class:"w-10 h-10 mx-auto mb-3"}),e[7]||(e[7]=s("p",null,"No speech synthesis voices available in your browser.",-1)),e[8]||(e[8]=s("p",{class:"text-sm mt-1"},"Please check your browser settings or try a different browser.",-1))])):(n(),i("div",Z,[r(V,{ui:{ring:"dark:ring-gray-700",header:{padding:"px-4 py-3 sm:px-6 sm:py-4"},body:{padding:"px-4 py-5 sm:p-6"}}},{header:m(()=>[s("div",ee,[r(g,{name:"i-heroicons-adjustments-horizontal",class:"w-5 h-5 text-gray-500 dark:text-gray-400"}),e[9]||(e[9]=s("h3",{class:"text-lg font-medium leading-6 text-gray-900 dark:text-white"}," Voice Selection ",-1))])]),default:m(()=>[r(x,{label:"How to select voices?",ui:{label:"text-sm font-medium text-gray-700 dark:text-gray-300"}},{default:m(()=>[r(A,{modelValue:l(a).settings.type,"onUpdate:modelValue":[e[0]||(e[0]=d=>l(a).settings.type=d),e[1]||(e[1]=d=>l(a).setVoiceType(d))],items:$},null,8,["modelValue"])]),_:1})]),_:1}),l(a).settings.type==="custom"?(n(),H(V,{key:0,ui:{ring:"dark:ring-gray-700",header:{padding:"px-4 py-3 sm:px-6 sm:py-4"},body:{padding:"px-4 py-5 sm:p-6"}}},{header:m(()=>[s("div",te,[r(g,{name:"i-heroicons-user",class:"w-5 h-5 text-gray-500 dark:text-gray-400"}),e[10]||(e[10]=s("h3",{class:"text-lg font-medium leading-6 text-gray-900 dark:text-white"}," Custom Voices ",-1))])]),default:m(()=>{var d,L;return[l(u).isPackLoaded?(n(),i("div",se,[r(x,{label:`Target Language Voice (${((d=l(u).info)==null?void 0:d.languages.targetLanguage)||"N/A"})`,ui:{label:"text-sm font-medium text-gray-700 dark:text-gray-300"}},{default:m(()=>[h(s("select",{"onUpdate:modelValue":e[2]||(e[2]=o=>k.value=o),class:"block w-full rounded-md bg-white dark:bg-gray-900 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-700 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 py-1.5 px-2.5 text-sm"},[e[11]||(e[11]=s("option",{value:null,disabled:""},"Select a voice...",-1)),(n(!0),i(C,null,T(D.value,o=>(n(),i("option",{key:o.name,value:o.name},N(o.name),9,re))),128))],512),[[S,k.value]])]),_:1},8,["label"]),r(x,{label:`Source Language Voice (${((L=l(u).info)==null?void 0:L.languages.sourceLanguage)||"N/A"})`,ui:{label:"text-sm font-medium text-gray-700 dark:text-gray-300"}},{default:m(()=>[h(s("select",{"onUpdate:modelValue":e[3]||(e[3]=o=>v.value=o),class:"block w-full rounded-md bg-white dark:bg-gray-900 text-gray-900 dark:text-white shadow-sm ring-1 ring-inset ring-gray-300 dark:ring-gray-700 focus:ring-2 focus:ring-primary-500 dark:focus:ring-primary-400 py-1.5 px-2.5 text-sm"},[e[12]||(e[12]=s("option",{value:null,disabled:""},"Select a voice...",-1)),(n(!0),i(C,null,T(E.value,o=>(n(),i("option",{key:o.name,value:o.name},N(o.name),9,oe))),128))],512),[[S,v.value]])]),_:1},8,["label"])])):(n(),i("div",ae," Load a study pack to select language-specific voices. "))]}),_:1})):I("",!0),s("div",ne,[r(b,{label:"Test Target Voice",icon:"i-heroicons-speaker-wave",color:"blue",variant:"outline",onClick:P,disabled:_.value,class:"cursor-pointer"},null,8,["disabled"]),r(b,{label:"Test Source Voice",icon:"i-heroicons-speaker-wave",color:"green",variant:"outline",onClick:B,disabled:w.value,class:"cursor-pointer"},null,8,["disabled"]),r(b,{label:"Reset to Defaults",class:"cursor-pointer",color:"gray",variant:"soft",onClick:e[4]||(e[4]=d=>l(a).resetToDefaults()),icon:"i-heroicons-arrow-uturn-left"})])]))])}}});export{de as _};
