import{_ as $}from"./Card-Cx9YQ4k9.js";import{d as b,Q as L,aH as M,q as v,h as N,G as y,F as t,L as a,V as U,b as k,w,_ as O,H as F,I as T,o as f}from"./index-CGDPbZo-.js";import{_ as j}from"./Separator-DdMlGGiI.js";import{_ as P}from"./VoiceSettings.vue_vue_type_script_setup_true_lang-aqlKhn23.js";import"./speechSynthesis-C0OYkZku.js";import"./useFormControl-D-kT-z77.js";function R(u,o){const s=JSON.stringify(u,null,2),n=new Blob([s],{type:"application/json"}),i=URL.createObjectURL(n),r=document.createElement("a");r.href=i,r.download=o,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(i)}function B(u){return new Promise((o,s)=>{if(!u.type.includes("json")){s(new Error("Invalid file type. Please select a .json file."));return}const n=new FileReader;n.onload=i=>{var r;try{const l=(r=i.target)==null?void 0:r.result;if(typeof l!="string")throw new Error("File could not be read as text.");const m=JSON.parse(l);o(m)}catch{s(new Error("Failed to parse JSON file. Ensure it has a valid format."))}},n.onerror=()=>{s(new Error("An error occurred while reading the file."))},n.readAsText(u)})}const J={class:"space-y-6 rounded-lg border border-gray-200 bg-white p-4 shadow-md dark:border-gray-700 dark:bg-gray-800"},H={class:"flex items-center gap-3"},V={key:0,class:"py-4 text-center text-gray-500 dark:text-gray-400"},D={key:1,class:"space-y-6"},A={class:"flex items-center gap-2"},q={class:"space-y-4"},z={class:"flex items-center gap-2"},G={class:"space-y-4"},Q=["innerHTML"],K=b({__name:"StatusManager",setup(u){const o=L(),{info:s,status:n,isPackLoaded:i,errors:r}=M(o),l=v(null),m=v(!1),g=v(""),x=v(!1),S=N(()=>x.value?"bg-red-100 text-red-800 dark:bg-red-900/50 dark:text-red-300":"bg-green-100 text-green-800 dark:bg-green-900/50 dark:text-green-300"),E=()=>{if(!n.value||!s.value)return;const d=`${s.value.id}_statuses_${new Date().toISOString().split("T")[0]}.json`;R(n.value.statusMap,d)},I=()=>{var d;(d=l.value)==null||d.click()},C=async d=>{var _;const c=(_=d.target.files)==null?void 0:_[0];if(c){m.value=!0,g.value="",x.value=!1,o.clearErrors();try{const p=await B(c);await o.applyImportedStatus(p),g.value="Statuses imported and applied successfully.",x.value=!1}catch(p){const h=r.value.join(`
`);g.value=`Import failed: ${p.message}
${h}`.trim(),x.value=!0,console.error("Import error:",p)}finally{m.value=!1,l.value&&(l.value.value="")}}};return(d,e)=>{const c=U,_=j,p=O,h=$;return f(),y("div",J,[t("div",H,[a(c,{name:"i-heroicons-arrows-up-down",class:"h-7 w-7 text-primary-500 dark:text-primary-400"}),e[0]||(e[0]=t("h2",{class:"text-2xl font-semibold text-gray-800 dark:text-gray-100"},"Status Management",-1))]),a(_),k(i)?(f(),y("div",D,[a(h,{ui:{ring:"dark:ring-gray-700",header:{padding:"px-4 py-3 sm:px-6 sm:py-4"},body:{padding:"px-4 py-5 sm:p-6"}}},{header:w(()=>[t("div",A,[a(c,{name:"i-heroicons-arrow-down-tray",class:"h-5 w-5 text-gray-500 dark:text-gray-400"}),e[2]||(e[2]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 dark:text-white"}," Export Statuses ",-1))])]),default:w(()=>[t("div",q,[e[3]||(e[3]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Download a JSON file containing the current status of all lexical units. This file can be used as a backup or for import later. ",-1)),a(p,{class:"cursor-pointer",label:"Export Statuses",icon:"i-heroicons-arrow-down-tray",color:"primary",variant:"solid",onClick:E,disabled:!k(i)},null,8,["disabled"])])]),_:1}),a(h,{ui:{ring:"dark:ring-gray-700",header:{padding:"px-4 py-3 sm:px-6 sm:py-4"},body:{padding:"px-4 py-5 sm:p-6"}}},{header:w(()=>[t("div",z,[a(c,{name:"i-heroicons-arrow-up-tray",class:"h-5 w-5 text-gray-500 dark:text-gray-400"}),e[4]||(e[4]=t("h3",{class:"text-lg font-medium leading-6 text-gray-900 dark:text-white"}," Import Statuses ",-1))])]),default:w(()=>[t("div",G,[e[5]||(e[5]=t("p",{class:"text-sm text-gray-600 dark:text-gray-400"}," Upload a previously exported JSON file to restore the status of lexical units. This will overwrite all current statuses. ",-1)),t("input",{type:"file",ref_key:"fileInput",ref:l,onChange:C,class:"hidden",accept:".json"},null,544),a(p,{class:"cursor-pointer",label:"Choose File to Import",icon:"i-heroicons-arrow-up-tray",color:"white",variant:"solid",onClick:I,loading:m.value,disabled:!k(i)||m.value},null,8,["loading","disabled"]),g.value?(f(),y("div",{key:0,class:T(["mt-3 rounded-md p-3 text-sm",S.value])},[t("p",{innerHTML:g.value.replace(/\n/g,"<br>")},null,8,Q)],2)):F("",!0)])]),_:1})])):(f(),y("div",V,[a(c,{name:"i-heroicons-exclamation-triangle",class:"mx-auto mb-3 h-10 w-10"}),e[1]||(e[1]=t("p",null,"Load a study pack to manage lexical unit statuses.",-1))]))])}}}),W={class:"space-y-6 mt-6"},re=b({__name:"SettingsPage",setup(u){return(o,s)=>(f(),y("div",W,[a(P),a(K)]))}});export{re as default};
